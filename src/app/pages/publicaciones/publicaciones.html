<div class="posts-page">
  <div class="posts-container">
     <app-create-post (postCreated)="onPostCreated()"></app-create-post>
    <!-- Header -->
    <div class="posts-header">
      <h1 class="posts-title">Publicaciones</h1>
      
      <!-- Selector de ordenamiento -->
      <div class="sort-container">
        <label class="sort-label">Ordenar por:</label>
        <select 
          [(ngModel)]="sortBy" 
          (change)="changeSort(sortBy)"
          class="sort-select"
        >
          <option value="date">MÃ¡s recientes</option>
          <option value="likes">MÃ¡s populares</option>
        </select>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-state">
      <div class="loading-spinner"></div>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="error-state">
      <div class="error-message">{{ error }}</div>
      <button (click)="loadPosts()" class="retry-button">Reintentar</button>
    </div>

    <!-- Posts List -->
    <div *ngIf="!loading && !error">
      <!-- Lista de posts -->
      <div class="posts-list">
        <app-post-card
          *ngFor="let post of posts"
          [post]="post"
          [showDeleteButton]="true"
          (like)="onLike($event)"
          (unlike)="onUnlike($event)"
          (delete)="onDelete($event)"
          (takenDown)="onPostRemoved($event)"
        ></app-post-card>
      </div>

      <!-- PaginaciÃ³n -->
      <div *ngIf="totalPages > 1" class="pagination">
        <!-- BotÃ³n Anterior -->
        <button
          (click)="changePage(currentPage - 1)"
          [disabled]="currentPage === 1"
          class="pagination-button"
        >
          â† Anterior
        </button>

        <!-- NÃºmeros de pÃ¡gina -->
        <button
          *ngFor="let page of pagesArray"
          (click)="changePage(page)"
          [class.active]="page === currentPage"
          class="pagination-number"
        >
          {{ page }}
        </button>

        <!-- BotÃ³n Siguiente -->
        <button
          (click)="changePage(currentPage + 1)"
          [disabled]="currentPage === totalPages"
          class="pagination-button"
        >
          Siguiente â†’
        </button>
      </div>

      <!-- Empty State -->
      <div *ngIf="posts.length === 0" class="empty-state">
        <div class="empty-icon">ğŸ“</div>
        <h3 class="empty-title">No hay publicaciones</h3>
        <p class="empty-text">SÃ© el primero en crear una publicaciÃ³n.</p>
      </div>
    </div>
  </div>
</div>