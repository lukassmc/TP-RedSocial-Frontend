<nav class="posts-navbar" [class.menu-open]="showUserMenu">
  <div class="navbar-content">

    <!-- Brand/Logo -->
    <div class="navbar-brand" (click)="goToPosts()">
      <span class="brand-emoji">ðŸŽµ</span>
      <span class="brand-text">Noisy</span>
    </div>

    <!-- LINKS PRINCIPALES -->
    <ng-container *ngIf="isAuthenticated">
      <div class="navbar-links">
        <a 
          routerLink="/posts"
          routerLinkActive="active-link"
          class="nav-link"
        >
          <i class="bi bi-house"></i><span>Publicaciones</span>
        </a>

        <a 
          routerLink="/profile"
          routerLinkActive="active-link"
          class="nav-link"
        >
          <i class="bi bi-person"></i><span>Mi Perfil</span>
        </a>
      </div>
    </ng-container>

    <!-- PERFIL DEL USUARIO -->
    <ng-container *ngIf="isAuthenticated">
      <div class="navbar-user">

        <!-- BotÃ³n -->
        <div class="user-profile" (click)="toggleUserMenu()">
          <img 
            [src]="currentUser?.profilePicture || defaultAvatarUrl"
            [alt]="currentUser?.nombre"
            class="profile-image"
          />
          <span class="username">{{ currentUser?.username }}</span>
          <i class="bi bi-chevron-down" [class.rotate-180]="showUserMenu"></i>
        </div>

        <!-- MENU DROPDOWN -->
        <div class="user-menu" *ngIf="showUserMenu">
          <div class="menu-header">
            <img
              [src]="currentUser?.profilePicture || defaultAvatarUrl"
              [alt]="currentUser?.nombre"
              class="menu-profile-image"
            />

            <div class="menu-user-info">
              <strong>{{ currentUser?.nombre }} {{ currentUser?.apellido }}</strong>
              <span>@{{ currentUser?.username }}</span>
            </div>
          </div>

          <div class="menu-divider"></div>

          <button class="menu-item" (click)="goToProfile()">
            <i class="bi bi-person"></i>
            Mi Perfil
          </button>

          <div class="menu-divider"></div>

          <button class="menu-item logout-btn" (click)="logout()">
            <i class="bi bi-box-arrow-right"></i>
            Cerrar SesiÃ³n
          </button>
        </div>

      </div>
    </ng-container>

  </div>
</nav>

<!-- BACKDROP para cerrar el menÃº al hacer click afuera -->
<div 
  class="menu-backdrop"
  *ngIf="showUserMenu"
  (click)=" this.showUserMenu = false"
></div>
